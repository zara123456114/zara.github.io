<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¢é˜Ÿå»ºè®¾RPG</title>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --dark: #2c3e50;
            --light: #ecf0f1;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: var(--dark);
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        .game-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .panel {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 0 8px rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }
        .panel-header {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--light);
            color: var(--dark);
        }
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .stat-item {
            background-color: var(--light);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-label {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--dark);
        }
        .currency {
            color: var(--warning);
        }
        .level {
            color: var(--secondary);
        }
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            flex-grow: 1;
            min-width: 120px;
        }
        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        button.danger {
            background-color: var(--danger);
        }
        button.success {
            background-color: var(--secondary);
        }
        button.warning {
            background-color: var(--warning);
        }
        .invite-link {
            margin: 15px 0;
            padding: 15px;
            background-color: rgba(46, 204, 113, 0.1);
            border: 1px dashed var(--secondary);
            border-radius: 8px;
            word-break: break-all;
            font-family: monospace;
        }
        .log {
            height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 10px;
            margin-top: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }
        .log-entry {
            margin-bottom: 8px;
            padding: 8px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            line-height: 1.4;
        }
        .bonus {
            color: var(--warning);
            font-weight: bold;
        }
        .success-text {
            color: var(--secondary);
        }
        .danger-text {
            color: var(--danger);
        }
        .character {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        .character-avatar {
            width: 80px;
            height: 80px;
            background-color: #ddd;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: #7f8c8d;
        }
        .character-info {
            flex-grow: 1;
        }
        .character-name {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 5px;
        }
        .character-class {
            display: inline-block;
            padding: 3px 8px;
            background-color: var(--primary);
            color: white;
            border-radius: 12px;
            font-size: 12px;
            margin-bottom: 8px;
        }
        .progress-bar {
            height: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: var(--secondary);
            width: 0%;
            transition: width 0.5s;
        }
        .skills {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .skill {
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .skill:hover {
            background-color: #e9ecef;
        }
        .skill-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .skill-desc {
            font-size: 12px;
            color: #7f8c8d;
        }
        .skill-cost {
            font-size: 12px;
            color: var(--warning);
            margin-top: 5px;
        }
        .skill.unlocked {
            background-color: rgba(46, 204, 113, 0.1);
            border-left: 3px solid var(--secondary);
        }
        .skill.locked {
            opacity: 0.6;
        }
        .equipment {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .equip-item {
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .equip-item:hover {
            background-color: #e9ecef;
        }
        .equip-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .equip-desc {
            font-size: 12px;
            color: #7f8c8d;
        }
        .equip-cost {
            font-size: 12px;
            color: var(--warning);
            margin-top: 5px;
        }
        .equip-owned {
            font-size: 12px;
            color: var(--secondary);
            margin-top: 5px;
        }
        .tab-container {
            margin-top: 20px;
        }
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 15px;
        }
        .tab {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        .tab.active {
            border-bottom: 3px solid var(--primary);
            font-weight: bold;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .team-member {
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .member-avatar {
            width: 40px;
            height: 40px;
            background-color: #ddd;
            border-radius: 50%;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #7f8c8d;
        }
        .member-info {
            flex-grow: 1;
        }
        .member-name {
            font-weight: bold;
        }
        .member-level {
            font-size: 12px;
            color: #7f8c8d;
        }
        .member-contribution {
            font-size: 12px;
            color: var(--warning);
        }
        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
            }
            .stats {
                grid-template-columns: 1fr;
            }
            .skills, .equipment {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>å›¢é˜Ÿå»ºè®¾RPG</h1>
        <div class="subtitle">é€šè¿‡è§’è‰²æ‰®æ¼”æ¸¸æˆçš„æ–¹å¼å‘å±•ä½ çš„å›¢é˜Ÿï¼Œæ¯æˆåŠŸé‚€è¯·ä¸€äººå¯è·å¾—2 EURå¥–é‡‘</div>
        
        <div class="character">
            <div class="character-avatar">ğŸ‘¤</div>
            <div class="character-info">
                <div class="character-name" id="player-name">é¢†å¯¼è€…</div>
                <span class="character-class" id="player-class">å›¢é˜Ÿé¢†è¢–</span>
                <div>ç­‰çº§ <span class="level" id="player-level">1</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="player-exp-bar" style="width: 0%"></div>
                </div>
                <div>ç»éªŒå€¼: <span id="player-exp">0</span>/<span id="player-next-level">100</span></div>
            </div>
        </div>
        
        <div class="game-area">
            <div class="panel">
                <div class="panel-header">å›¢é˜ŸçŠ¶æ€</div>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">å›¢é˜Ÿæˆå‘˜</div>
                        <div class="stat-value" id="team-count">1</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">é‚€è¯·å¥–é‡‘</div>
                        <div class="stat-value"><span class="currency" id="bonus-earned">0</span> EUR</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">é‚€è¯·é“¾æ¥</div>
                        <div class="stat-value" id="invites-sent">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">è½¬åŒ–ç‡</div>
                        <div class="stat-value" id="conversion-rate">20%</div>
                    </div>
                </div>
                
                <div class="invite-link">
                    <p>ä½ çš„é‚€è¯·é“¾æ¥ï¼š</p>
                    <p id="invite-link">https://imgp4o.com/invite/user123</p>
                    <button onclick="copyInviteLink()">å¤åˆ¶é“¾æ¥</button>
                </div>
                
                <div class="button-group">
                    <button onclick="sendInvite()">å‘é€é‚€è¯·</button>
                    <button class="success" onclick="trainMember()">åŸ¹è®­æˆå‘˜</button>
                    <button class="warning" onclick="motivateTeam()">æ¿€åŠ±å›¢é˜Ÿ</button>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-header">æ¸¸æˆæ—¥å¿—</div>
                <div class="log" id="game-log">
                    <div class="log-entry">æ¬¢è¿æ¥åˆ°å›¢é˜Ÿå»ºè®¾RPGï¼å¼€å§‹é‚€è¯·æ–°æˆå‘˜å‘å±•ä½ çš„å›¢é˜Ÿå§ã€‚</div>
                </div>
            </div>
        </div>
        
        <div class="tab-container">
            <div class="tabs">
                <div class="tab active" onclick="openTab('skills')">æŠ€èƒ½æ ‘</div>
                <div class="tab" onclick="openTab('equipment')">è£…å¤‡</div>
                <div class="tab" onclick="openTab('team')">å›¢é˜Ÿæˆå‘˜</div>
                <div class="tab" onclick="openTab('achievements')">æˆå°±</div>
            </div>
            
            <div id="skills" class="tab-content active">
                <div class="skills">
                    <div class="skill locked" onclick="unlockSkill('recruiting')">
                        <div class="skill-name">é«˜æ•ˆæ‹›å‹Ÿ</div>
                        <div class="skill-desc">æé«˜é‚€è¯·è½¬åŒ–ç‡5%</div>
                        <div class="skill-cost">æ¶ˆè€—: 50 EUR</div>
                    </div>
                    <div class="skill locked" onclick="unlockSkill('training')">
                        <div class="skill-name">ä¸“ä¸šåŸ¹è®­</div>
                        <div class="skill-desc">å›¢é˜Ÿæˆå‘˜è´¡çŒ®å¢åŠ 10%</div>
                        <div class="skill-cost">æ¶ˆè€—: 75 EUR</div>
                    </div>
                    <div class="skill locked" onclick="unlockSkill('leadership')">
                        <div class="skill-name">é¢†å¯¼åŠ›</div>
                        <div class="skill-desc">è§£é”é«˜çº§å›¢é˜Ÿæˆå‘˜ä½ç½®</div>
                        <div class="skill-cost">æ¶ˆè€—: 100 EUR</div>
                    </div>
                    <div class="skill locked" onclick="unlockSkill('networking')">
                        <div class="skill-name">ç¤¾äº¤ç½‘ç»œ</div>
                        <div class="skill-desc">æ¯æ¬¡é‚€è¯·å‘é€2ä¸ªé“¾æ¥</div>
                        <div class="skill-cost">æ¶ˆè€—: 80 EUR</div>
                    </div>
                </div>
            </div>
            
            <div id="equipment" class="tab-content">
                <div class="equipment">
                    <div class="equip-item" onclick="buyEquipment('automatic-inviter')">
                        <div class="equip-name">è‡ªåŠ¨é‚€è¯·å™¨</div>
                        <div class="equip-desc">æ¯å°æ—¶è‡ªåŠ¨å‘é€1ä¸ªé‚€è¯·</div>
                        <div class="equip-cost">ä»·æ ¼: 150 EUR</div>
                        <div class="equip-owned" id="automatic-inviter-owned">å·²æ‹¥æœ‰: 0</div>
                    </div>
                    <div class="equip-item" onclick="buyEquipment('training-manual')">
                        <div class="equip-name">åŸ¹è®­æ‰‹å†Œ</div>
                        <div class="equip-desc">æé«˜åŸ¹è®­æ•ˆæœ20%</div>
                        <div class="equip-cost">ä»·æ ¼: 120 EUR</div>
                        <div class="equip-owned" id="training-manual-owned">å·²æ‹¥æœ‰: 0</div>
                    </div>
                    <div class="equip-item" onclick="buyEquipment('motivational-poster')">
                        <div class="equip-name">æ¿€åŠ±æµ·æŠ¥</div>
                        <div class="equip-desc">å›¢é˜Ÿæ¿€åŠ±æ•ˆæœæå‡30%</div>
                        <div class="equip-cost">ä»·æ ¼: 100 EUR</div>
                        <div class="equip-owned" id="motivational-poster-owned">å·²æ‹¥æœ‰: 0</div>
                    </div>
                    <div class="equip-item" onclick="buyEquipment('premium-link')">
                        <div class="equip-name">é«˜çº§é“¾æ¥</div>
                        <div class="equip-desc">é‚€è¯·è½¬åŒ–ç‡æé«˜15%</div>
                        <div class="equip-cost">ä»·æ ¼: 200 EUR</div>
                        <div class="equip-owned" id="premium-link-owned">å·²æ‹¥æœ‰: 0</div>
                    </div>
                </div>
            </div>
            
            <div id="team" class="tab-content">
                <div id="team-members-list">
                    <div class="team-member">
                        <div class="member-avatar">ğŸ‘‘</div>
                        <div class="member-info">
                            <div class="member-name">ä½  (é¢†å¯¼è€…)</div>
                            <div class="member-level">ç­‰çº§ 1</div>
                        </div>
                        <div class="member-contribution">+2 EUR/é‚€è¯·</div>
                    </div>
                </div>
            </div>
            
            <div id="achievements" class="tab-content">
                <p>æˆå°±ç³»ç»Ÿå°†åœ¨æœªæ¥æ›´æ–°ä¸­æ¨å‡º...</p>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            player: {
                name: "é¢†å¯¼è€…",
                class: "å›¢é˜Ÿé¢†è¢–",
                level: 1,
                exp: 0,
                nextLevelExp: 100,
                skills: []
            },
            team: {
                count: 1,
                members: [
                    {
                        id: 1,
                        name: "ä½ ",
                        role: "é¢†å¯¼è€…",
                        level: 1,
                        contribution: 2,
                        trained: false
                    }
                ],
                maxMembers: 5,
                motivation: 1.0
            },
            economy: {
                bonusEarned: 0,
                invitesSent: 0,
                conversionRate: 0.2,
                baseConversion: 0.2
            },
            skills: {
                recruiting: { unlocked: false, effect: 0.05, cost: 50 },
                training: { unlocked: false, effect: 0.1, cost: 75 },
                leadership: { unlocked: false, effect: 0, cost: 100 },
                networking: { unlocked: false, effect: 0, cost: 80 }
            },
            equipment: {
                'automatic-inviter': { owned: 0, price: 150, effect: 1 },
                'training-manual': { owned: 0, price: 120, effect: 0.2 },
                'motivational-poster': { owned: 0, price: 100, effect: 0.3 },
                'premium-link': { owned: 0, price: 200, effect: 0.15 }
            },
            achievements: [],
            lastInviteTime: 0
        };

        // DOMå…ƒç´ 
        const playerNameEl = document.getElementById('player-name');
        const playerClassEl = document.getElementById('player-class');
        const playerLevelEl = document.getElementById('player-level');
        const playerExpEl = document.getElementById('player-exp');
        const playerNextLevelEl = document.getElementById('player-next-level');
        const playerExpBarEl = document.getElementById('player-exp-bar');
        
        const teamCountEl = document.getElementById('team-count');
        const bonusEarnedEl = document.getElementById('bonus-earned');
        const invitesSentEl = document.getElementById('invites-sent');
        const conversionRateEl = document.getElementById('conversion-rate');
        const gameLogEl = document.getElementById('game-log');
        const inviteLinkEl = document.getElementById('invite-link');
        const teamMembersListEl = document.getElementById('team-members-list');

        // ç”Ÿæˆéšæœºç”¨æˆ·ID
        function generateUserId() {
            return 'user' + Math.floor(Math.random() * 1000000);
        }

        // æ›´æ–°é‚€è¯·é“¾æ¥
        function updateInviteLink() {
            inviteLinkEl.textContent = `https://imgp4o.com/invite/${generateUserId()}`;
        }

        // å¤åˆ¶é‚€è¯·é“¾æ¥
        function copyInviteLink() {
            navigator.clipboard.writeText(inviteLinkEl.textContent)
                .then(() => addLog("é‚€è¯·é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼"));
        }

        // å‘é€é‚€è¯·
        function sendInvite() {
            const now = Date.now();
            if (now - gameState.lastInviteTime < 1000) {
                addLog("æ“ä½œå¤ªå¿«äº†ï¼Œè¯·ç¨åå†è¯•ï¼");
                return;
            }
            gameState.lastInviteTime = now;
            
            // åŸºç¡€é‚€è¯·
            sendSingleInvite();
            
            // æ£€æŸ¥æ˜¯å¦æœ‰ç½‘ç»œæŠ€èƒ½ï¼Œå¯ä»¥å‘é€é¢å¤–é‚€è¯·
            if (gameState.skills.networking.unlocked) {
                setTimeout(() => {
                    addLog("ç¤¾äº¤ç½‘ç»œæŠ€èƒ½æ¿€æ´»ï¼šå‘é€é¢å¤–é‚€è¯·ï¼");
                    sendSingleInvite();
                }, 500);
            }
        }

        function sendSingleInvite() {
            gameState.economy.invitesSent++;
            invitesSentEl.textContent = gameState.economy.invitesSent;
            addLog(`ä½ å‘é€äº†ç¬¬ ${gameState.economy.invitesSent} ä¸ªé‚€è¯·...`);
            
            // æ¨¡æ‹Ÿé‚€è¯·ç»“æœï¼ˆæœ‰ä¸€å®šæ¦‚ç‡æˆåŠŸï¼‰
            setTimeout(() => {
                if (Math.random() < gameState.economy.conversionRate) {
                    // é‚€è¯·æˆåŠŸ
                    const newMemberId = gameState.team.members.length + 1;
                    const newMember = {
                        id: newMemberId,
                        name: `æˆå‘˜${newMemberId}`,
                        role: "åˆçº§æˆå‘˜",
                        level: 1,
                        contribution: 1,
                        trained: false
                    };
                    
                    gameState.team.members.push(newMember);
                    gameState.team.count = gameState.team.members.length;
                    const bonus = calculateBonus();
                    gameState.economy.bonusEarned += bonus;
                    
                    updateTeamStats();
                    addLog(`ğŸ‰ é‚€è¯·æˆåŠŸï¼${newMember.name}åŠ å…¥ä½ çš„å›¢é˜Ÿã€‚è·å¾— <span class="bonus">${bonus} EUR</span> å¥–é‡‘ã€‚`);
                    addExp(10);
                    updateInviteLink();
                    
                    // æ›´æ–°å›¢é˜Ÿæˆå‘˜åˆ—è¡¨
                    renderTeamMembers();
                } else {
                    addLog("é‚€è¯·æœªæˆåŠŸï¼Œå¯¹æ–¹æ²¡æœ‰æ³¨å†Œã€‚");
                }
            }, 1000);
        }

        // è®¡ç®—å¥–é‡‘
        function calculateBonus() {
            let total = 0;
            gameState.team.members.forEach(member => {
                let contribution = member.contribution;
                if (member.trained) {
                    contribution *= 1.2; // åŸ¹è®­åŸºç¡€åŠ æˆ20%
                    if (gameState.skills.training.unlocked) {
                        contribution *= (1 + gameState.skills.training.effect);
                    }
                    if (gameState.equipment['training-manual'].owned > 0) {
                        contribution *= (1 + gameState.equipment['training-manual'].effect);
                    }
                }
                total += contribution;
            });
            
            // å›¢é˜Ÿæ¿€åŠ±æ•ˆæœ
            total *= gameState.team.motivation;
            
            return Math.round(total * 100) / 100;
        }

        // åŸ¹è®­æˆå‘˜
        function trainMember() {
            if (gameState.team.count <= 1) {
                addLog("ä½ è¿˜æ²¡æœ‰å›¢é˜Ÿæˆå‘˜å¯ä»¥åŸ¹è®­ï¼");
                return;
            }
            
            // æ‰¾å‡ºæœªåŸ¹è®­çš„æˆå‘˜
            const untrainedMembers = gameState.team.members.filter(m => !m.trained && m.role !== "é¢†å¯¼è€…");
            if (untrainedMembers.length === 0) {
                addLog("æ‰€æœ‰æˆå‘˜éƒ½å·²æ¥å—è¿‡åŸ¹è®­ï¼");
                return;
            }
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªæˆå‘˜è¿›è¡ŒåŸ¹è®­
            const randomIndex = Math.floor(Math.random() * untrainedMembers.length);
            const member = untrainedMembers[randomIndex];
            member.trained = true;
            member.contribution *= 1.2; // åŸºç¡€åŸ¹è®­å¢åŠ 20%
            
            if (gameState.skills.training.unlocked) {
                member.contribution *= (1 + gameState.skills.training.effect);
            }
            
            if (gameState.equipment['training-manual'].owned > 0) {
                member.contribution *= (1 + gameState.equipment['training-manual'].effect);
            }
            
            member.contribution = Math.round(member.contribution * 100) / 100;
            member.role = "å—è®­æˆå‘˜";
            
            addLog(`ğŸ“š ${member.name} å®Œæˆäº†åŸ¹è®­ï¼ç°åœ¨è´¡çŒ®å€¼ä¸º ${member.contribution} EUR/é‚€è¯·ã€‚`);
            renderTeamMembers();
        }

        // æ¿€åŠ±å›¢é˜Ÿ
        function motivateTeam() {
            const motivationBoost = 0.2; // åŸºç¡€æ¿€åŠ±20%
            let totalBoost = motivationBoost;
            
            if (gameState.equipment['motivational-poster'].owned > 0) {
                totalBoost += gameState.equipment['motivational-poster'].effect;
            }
            
            gameState.team.motivation = 1 + totalBoost;
            addLog(`ğŸ’ª å›¢é˜Ÿæ¿€åŠ±æˆåŠŸï¼ä¸‹æ¬¡é‚€è¯·å¥–é‡‘æé«˜ ${Math.round(totalBoost * 100)}%ã€‚`);
            
            // æ¿€åŠ±æ•ˆæœæŒç»­3æ¬¡é‚€è¯·
            let count = 0;
            const originalMotivation = gameState.team.motivation;
            const motivationInterval = setInterval(() => {
                if (count >= 3 || gameState.team.motivation !== originalMotivation) {
                    clearInterval(motivationInterval);
                    if (gameState.team.motivation === originalMotivation) {
                        gameState.team.motivation = 1.0;
                        addLog("å›¢é˜Ÿæ¿€åŠ±æ•ˆæœå·²ç»“æŸã€‚");
                    }
                }
                count++;
            }, 3000);
        }

        // è§£é”æŠ€èƒ½
        function unlockSkill(skillName) {
            const skill = gameState.skills[skillName];
            
            if (skill.unlocked) {
                addLog("è¿™ä¸ªæŠ€èƒ½å·²ç»è§£é”äº†ï¼");
                return;
            }
            
            if (gameState.economy.bonusEarned < skill.cost) {
                addLog(`ğŸ’° ä½™é¢ä¸è¶³ï¼Œéœ€è¦${skill.cost} EURè§£é”æ­¤æŠ€èƒ½ã€‚`);
                return;
            }
            
            gameState.economy.bonusEarned -= skill.cost;
            skill.unlocked = true;
            gameState.player.skills.push(skillName);
            
            // åº”ç”¨æŠ€èƒ½æ•ˆæœ
            switch(skillName) {
                case 'recruiting':
                    gameState.economy.conversionRate += skill.effect;
                    conversionRateEl.textContent = `${Math.round(gameState.economy.conversionRate * 100)}%`;
                    break;
                case 'leadership':
                    gameState.team.maxMembers = 10;
                    addLog("å›¢é˜Ÿä¸Šé™å¢åŠ åˆ°10äººï¼");
                    break;
            }
            
            updateTeamStats();
            addLog(`âœ… æˆåŠŸè§£é”æŠ€èƒ½: ${getSkillName(skillName)}ï¼`);
            renderSkills();
            addExp(15);
        }

        // è´­ä¹°è£…å¤‡
        function buyEquipment(equipName) {
            const equip = gameState.equipment[equipName];
            
            if (gameState.economy.bonusEarned < equip.price) {
                addLog(`ğŸ’° ä½™é¢ä¸è¶³ï¼Œéœ€è¦${equip.price} EURè´­ä¹°æ­¤è£…å¤‡ã€‚`);
                return;
            }
            
            gameState.economy.bonusEarned -= equip.price;
            equip.owned++;
            
            // åº”ç”¨è£…å¤‡æ•ˆæœ
            switch(equipName) {
                case 'premium-link':
                    gameState.economy.conversionRate = gameState.economy.baseConversion + equip.effect;
                    conversionRateEl.textContent = `${Math.round(gameState.economy.conversionRate * 100)}%`;
                    break;
            }
            
            updateTeamStats();
            addLog(`ğŸ›’ è´­ä¹°äº† ${getEquipName(equipName)}ï¼`);
            renderEquipment();
            addExp(10);
        }

        // æ·»åŠ ç»éªŒå€¼
        function addExp(amount) {
            gameState.player.exp += amount;
            if (gameState.player.exp >= gameState.player.nextLevelExp) {
                levelUp();
            }
            
            playerExpEl.textContent = gameState.player.exp;
            const percentage = (gameState.player.exp / gameState.player.nextLevelExp) * 100;
            playerExpBarEl.style.width = `${percentage}%`;
        }

        // å‡çº§
        function levelUp() {
            gameState.player.level++;
            gameState.player.exp -= gameState.player.nextLevelExp;
            gameState.player.nextLevelExp = Math.floor(gameState.player.nextLevelExp * 1.5);
            
            playerLevelEl.textContent = gameState.player.level;
            playerNextLevelEl.textContent = gameState.player.nextLevelExp;
            
            addLog(`ğŸŠ æ­å–œå‡çº§ï¼ä½ ç°åœ¨æ˜¯ ${gameState.player.class} ç­‰çº§ ${gameState.player.level}ã€‚`);
            
            // å‡çº§å¥–åŠ±
            if (gameState.player.level % 2 === 0) {
                gameState.economy.baseConversion += 0.02;
                gameState.economy.conversionRate = gameState.economy.baseConversion;
                if (gameState.equipment['premium-link'].owned > 0) {
                    gameState.economy.conversionRate += gameState.equipment['premium-link'].effect;
                }
                conversionRateEl.textContent = `${Math.round(gameState.economy.conversionRate * 100)}%`;
                addLog("ä½ çš„åŸºç¡€é‚€è¯·è½¬åŒ–ç‡æé«˜äº†2%ï¼");
            }
        }

        // æ›´æ–°å›¢é˜Ÿç»Ÿè®¡æ•°æ®
        function updateTeamStats() {
            teamCountEl.textContent = gameState.team.count;
            bonusEarnedEl.textContent = gameState.economy.bonusEarned;
            conversionRateEl.textContent = `${Math.round(gameState.economy.conversionRate * 100)}%`;
        }

        // æ·»åŠ æ—¥å¿—æ¡ç›®
        function addLog(message) {
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = message;
            gameLogEl.appendChild(logEntry);
            gameLogEl.scrollTop = gameLogEl.scrollHeight;
        }

        // æ¸²æŸ“æŠ€èƒ½æ ‘
        function renderSkills() {
            document.querySelectorAll('.skill').forEach(el => {
                const skillName = el.onclick.toString().match(/'([^']+)'/)[1];
                const skill = gameState.skills[skillName];
                
                el.classList.remove('unlocked', 'locked');
                if (skill.unlocked) {
                    el.classList.add('unlocked');
                } else {
                    el.classList.add('locked');
                }
            });
        }

        // æ¸²æŸ“è£…å¤‡
        function renderEquipment() {
            for (const equipName in gameState.equipment) {
                const el = document.getElementById(`${equipName}-owned`);
                if (el) {
                    el.textContent = `å·²æ‹¥æœ‰: ${gameState.equipment[equipName].owned}`;
                }
            }
        }

        // æ¸²æŸ“å›¢é˜Ÿæˆå‘˜
        function renderTeamMembers() {
            teamMembersListEl.innerHTML = '';
            
            gameState.team.members.forEach(member => {
                const memberEl = document.createElement('div');
                memberEl.className = 'team-member';
                
                let avatar = 'ğŸ‘¤';
                if (member.role === "é¢†å¯¼è€…") avatar = 'ğŸ‘‘';
                else if (member.trained) avatar = 'ğŸ“';
                
                memberEl.innerHTML = `
                    <div class="member-avatar">${avatar}</div>
                    <div class="member-info">
                        <div class="member-name">${member.name} (${member.role})</div>
                        <div class="member-level">ç­‰çº§ ${member.level}</div>
                    </div>
                    <div class="member-contribution">+${member.contribution} EUR/é‚€è¯·</div>
                `;
                
                teamMembersListEl.appendChild(memberEl);
            });
        }

        // è·å–æŠ€èƒ½åç§°
        function getSkillName(skillKey) {
            const skills = {
                'recruiting': 'é«˜æ•ˆæ‹›å‹Ÿ',
                'training': 'ä¸“ä¸šåŸ¹è®­',
                'leadership': 'é¢†å¯¼åŠ›',
                'networking': 'ç¤¾äº¤ç½‘ç»œ'
            };
            return skills[skillKey] || skillKey;
        }

        // è·å–è£…å¤‡åç§°
        function getEquipName(equipKey) {
            const equipment = {
                'automatic-inviter': 'è‡ªåŠ¨é‚€è¯·å™¨',
                'training-manual': 'åŸ¹è®­æ‰‹å†Œ',
                'motivational-poster': 'æ¿€åŠ±æµ·æŠ¥',
                'premium-link': 'é«˜çº§é“¾æ¥'
            };
            return equipment[equipKey] || equipKey;
        }

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function openTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.remove('active');
            });
            
            // å–æ¶ˆæ‰€æœ‰æ ‡ç­¾çš„æ´»åŠ¨çŠ¶æ€
            document.querySelectorAll('.tab').forEach(el => {
                el.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰å®šçš„æ ‡ç­¾å†…å®¹
            document.getElementById(tabName).classList.add('active');
            
            // è®¾ç½®é€‰å®šæ ‡ç­¾ä¸ºæ´»åŠ¨çŠ¶æ€
            event.currentTarget.classList.add('active');
        }

        // è‡ªåŠ¨é‚€è¯·åŠŸèƒ½
        function startAutoInviter() {
            if (gameState.equipment['automatic-inviter'].owned > 0) {
                setInterval(() => {
                    if (gameState.team.count < gameState.team.maxMembers) {
                        sendSingleInvite();
                    }
                }, 3600000); // æ¯å°æ—¶ä¸€æ¬¡
            }
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            updateInviteLink();
            updateTeamStats();
            renderSkills();
            renderEquipment();
            renderTeamMembers();
            startAutoInviter();
        }

        // å¯åŠ¨æ¸¸æˆ
        initGame();
    </script>
</body>
</html>